"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _vueProgressbar=require("./vue-progressbar.vue"),_vueProgressbar2=_interopRequireDefault(_vueProgressbar);const regexColor=new RegExp("(^#[0-9a-fA-F]{6}$)|(^#[0-9a-fA-F]{3}$)|(^rgb\\([0-9]{1,3}, [0-9]{1,3}, [0-9]{1,3}\\)$)"),regexLocation=new RegExp("(left|right|top|bottom)"),regexTime=new RegExp("(\\d+\\.\\d+)(s|ms)|(\\.\\d+)(s|ms)|(\\d+)(s|ms)"),regexThickness=new RegExp("(\\d+\\.\\d+)(px|em|pt|%|vh|vw)|(\\.\\d+)(px|em|pt|%|vh|vw)|(\\d+)(px|em|pt|%|vh|vw)");var getRandomIntInclusive=function(t,i){return t=Math.floor(t),i=Math.floor(i),Math.floor(Math.random()*(i-t+1))+t},getRandomColor=function(t){var i={min:255,max:255},e={min:255,max:255},o={min:255,max:255};return void 0!==t&&(void 0!==t.r&&(void 0!==t.r.min?i.min=t.r.min:null,void 0!==t.r.max?i.max=t.r.max:null),void 0!==t.g&&(void 0!==t.g.min?e.min=t.g.min:null,void 0!==t.g.max?e.max=t.g.max:null),void 0!==t.b&&(void 0!==t.b.min?o.min=t.b.min:null,void 0!==t.b.max?o.max=t.b.max:null)),"rgb("+getRandomIntInclusive(i.min,i.max)+", "+getRandomIntInclusive(e.min,e.max)+", "+getRandomIntInclusive(o.min,o.max)+")"},getRandomThickness=function(t){var i=2,e=7,o="px";return void 0!==t&&(void 0!==t.min?i=t.min:null,void 0!==t.max?e=t.max:null,void 0!==t.suffix?o=t.suffix:null),getRandomIntInclusive(i,e)+o},getRandomTransition=function(t){var i,e,o,s,n;return void 0!==t?(void 0!==t.time.min&&void 0!==t.time.max?(i=t.time.min%1===0||t.time.max%1===0?0:getRandomIntInclusive(Math.floor(t.time.min%1*100),Math.floor(t.time.max%1*100)),o=getRandomIntInclusive(t.time.min,t.time.max)):(o=getRandomIntInclusive(0,1),i=o<1?getRandomIntInclusive(50,99):getRandomIntInclusive(0,50)),void 0!==t.opacity.min&&void 0!==t.opacity.max?(e=t.opacity.min%1===0||t.opacity.max%1===0?0:getRandomIntInclusive(Math.floor(t.opacity.min%1*100),Math.floor(t.opacity.max%1*100)),s=getRandomIntInclusive(t.opacity.min,t.opacity.max)):(s=getRandomIntInclusive(0,1),e=s<1?getRandomIntInclusive(50,99):getRandomIntInclusive(0,50))):(o=getRandomIntInclusive(0,1),s=getRandomIntInclusive(0,1),i=o<1?getRandomIntInclusive(50,99):getRandomIntInclusive(0,50),e=s<1?getRandomIntInclusive(50,99):getRandomIntInclusive(0,50)),n={time:o+"."+i+"s",opacity:s+"."+e+"s"}},getRandomLocation=function(t){if(void 0!==t)return t[getRandomIntInclusive(0,t.length-1)];switch(getRandomIntInclusive(0,3)){case 0:return"top";case 1:return"bottom";case 2:return"left";case 3:return"right"}},getRandomInverse=function(t){if(void 0!==t)return t[getRandomIntInclusive(0,t.length-1)];switch(getRandomIntInclusive(0,1)){case 0:return!1;case 1:return!0}};module.exports.install=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=("2"===t.version.split(".")[0],"undefined"!=typeof window),o={$root:null,state:{pTime:null,settings:null,timer:null,hideTimer:null,hideTimer2:null,revertTimer:null,cut:0},log:function(t){this.state.settings.debug&&console.log(t)},init:function(t){this.$root=t,this.state.settings=this.$root.RADON_LOADING_BAR.options},start:function(t){this.$root.RADON_LOADING_BAR.temp.use?this.state.settings=this.$root.RADON_LOADING_BAR.temp:this.state.settings=this.$root.RADON_LOADING_BAR.options;var i=this;t||(regexTime.test(this.state.settings.transition.time)?(this.state.pTime=parseFloat(this.state.settings.transition.time.replace("/(ms|s)/")),this.state.settings.transition.time.includes("ms")||(this.state.pTime*=1e3),t=this.state.pTime):(this.log("invalid time: "+this.state.settings.transition.time),this.log("valid formats: ##, #.#, .# [ms|s]"),this.log("example: 1000ms, 1.0s, .10ms"),this.state.pTime=t=3e3)),this.$root&&(this.$root.RADON_LOADING_BAR.hidden=!1,this.state.settings.show=!0,this.state.settings.canSuccess=!0,this.state.cut=1e4/Math.floor(t),this.state.timer=setInterval(function(){i.increase(i.state.cut*Math.random()),i.$root.RADON_LOADING_BAR.percent>95&&i.finish()},100))},set:function(t){this.state.settings.show=!0,this.state.settings.canSuccess=!0,this.$root.RADON_LOADING_BAR.percent=Math.floor(t)},h_setFailColor:function(t,i){i?(this.$root.RADON_LOADING_BAR.temp.failedColor=t,this.$root.RADON_LOADING_BAR.temp.use?null:this.$root.RADON_LOADING_BAR.temp.use=!0):this.$root.RADON_LOADING_BAR.options.failedColor=t},h_setColor:function(t,i){i?(this.$root.RADON_LOADING_BAR.temp.color=t,this.$root.RADON_LOADING_BAR.temp.use?null:this.$root.RADON_LOADING_BAR.temp.use=!0):this.$root.RADON_LOADING_BAR.options.color=t},h_setLocation:function(t,i){i?(this.$root.RADON_LOADING_BAR.temp.location=t,this.$root.RADON_LOADING_BAR.temp.use?null:this.$root.RADON_LOADING_BAR.temp.use=!0):this.$root.RADON_LOADING_BAR.options.location=t},h_setTransition:function(t,i){i?(this.$root.RADON_LOADING_BAR.temp.transition=t,this.$root.RADON_LOADING_BAR.temp.use?null:this.$root.RADON_LOADING_BAR.temp.use=!0):this.$root.RADON_LOADING_BAR.options.transition=t},h_setInverse:function(t,i){i?(this.$root.RADON_LOADING_BAR.temp.inverse=t,this.$root.RADON_LOADING_BAR.temp.use?null:this.$root.RADON_LOADING_BAR.temp.use=!0):this.$root.RADON_LOADING_BAR.options.inverse=t},h_setThickness:function(t,i){i?(this.$root.RADON_LOADING_BAR.temp.thickness=t,this.$root.RADON_LOADING_BAR.temp.use?null:this.$root.RADON_LOADING_BAR.temp.use=!0):this.$root.RADON_LOADING_BAR.options.thickness=t},get:function(){return Math.floor(this.$root.RADON_LOADING_BAR.percent)},increase:function(t){this.$root.RADON_LOADING_BAR.percent=this.$root.RADON_LOADING_BAR.percent+Math.floor(t)},decrease:function(t){this.$root.RADON_LOADING_BAR.percent=this.$root.RADON_LOADING_BAR.percent-Math.floor(t)},readyToRevert:function(){if(this.$root.RADON_LOADING_BAR.hidden)this.revert();else{var t=this;this.state.revertTimer=setTimeout(function(){t.readyToRevert()},500)}},revert:function(){this.$root.RADON_LOADING_BAR.temp={use:!1,debug:this.$root.RADON_LOADING_BAR.options.debug,canSuccess:this.$root.RADON_LOADING_BAR.options.canSuccess,show:this.$root.RADON_LOADING_BAR.options.show,color:this.$root.RADON_LOADING_BAR.options.color,failedColor:this.$root.RADON_LOADING_BAR.options.failedColor,thickness:this.$root.RADON_LOADING_BAR.options.thickness,autoRevert:this.$root.RADON_LOADING_BAR.options.autoRevert,location:this.$root.RADON_LOADING_BAR.options.location,inverse:this.$root.RADON_LOADING_BAR.options.inverse,transition:this.$root.RADON_LOADING_BAR.options.transition}},quickHide:function(){return this.$root.RADON_LOADING_BAR.quickHide=!0,this.$root.RADON_LOADING_BAR.percent=0,clearInterval(this.state.timer),clearTimeout(this.state.hideTimer),clearTimeout(this.state.hideTimer2),this.state.timer=null,this.state.settings.autoRevert&&this.$root.RADON_LOADING_BAR.temp.use&&(clearTimeout(this.state.revertTimer),this.revert()),!0},hide:function(){clearInterval(this.state.timer),this.state.timer=null;var t=this;this.state.settings.autoRevert&&t.$root.RADON_LOADING_BAR.temp.use&&this.readyToRevert(),this.state.hideTimer=setTimeout(function(){t.$root.RADON_LOADING_BAR.options.show=!1,t.$root.RADON_LOADING_BAR.percent=0,t.state.hideTimer2=setTimeout(function(){t.$root.RADON_LOADING_BAR.hidden=!0},t.state.pTime)},this.state.pTime)},pause:function(){clearInterval(this.state.timer)},finish:function(){this.$root&&(this.$root.RADON_LOADING_BAR.percent=100,this.hide())},fail:function(t){this.state.settings.canSuccess=!1,this.$root.RADON_LOADING_BAR.percent=100,this.hide()},callMeta:function(){var t,i=Array.prototype.slice.call(arguments);t="temp"===i[1],"color"===i[0]?this.call("set","color",i[2],t):"fail"===i[0]?this.call("set","fail",i[2],t):"location"===i[0]?this.call("set","location",i[2],t):"transition"===i[0]?this.call("set","transition",i[2],t):"inverse"===i[0]?this.call("set","inverse",i[2],t):"thickness"===i[0]&&this.call("set","thickness",i[2],t)},callSetTemp:function(){var t=Array.prototype.slice.call(arguments);if("color"===t[0])this.validColor(t[1])?this.h_setColor(t[1],t[2]):this.log('invalid color input: "'+t[1]+'"');else if("fail"===t[0])this.validColor(t[1])?this.h_setFailColor(t[1],t[2]):this.log('invalid color input: "'+t[1]+'"');else if("location"===t[0])this.validLocation(t[1])?this.h_setLocation(t[1],t[2]):this.log('invalid location input: "'+t[1]+'"');else if("transition"===t[0]){var i=this.$root.RADON_LOADING_BAR.options.transition;void 0!==t[1].time&&(this.validTime(t[1].time)?i.time=t[1].time:this.log('invalid transition time: "'+t[1].time+'". Using default.')),void 0!==t[1].opacity&&(this.validTime(t[1].opacity)?i.opacity=t[1].opacity:this.log('invalid transition opacity: "'+t[1].opacity+'". Using default.')),this.h_setTransition(i,t[2])}else"inverse"===t[0]?"boolean"==typeof t[1]?this.h_setInverse(t[1],t[2]):this.log('invalid inverse: "'+t[1]+'"'):"thickness"===t[0]&&(this.validThickness(t[1])?this.h_setThickness(t[1],t[2]):this.log('invalid thickness: "'+t[1]+'"'))},callRevert:function(t){"color"===t?this.h_setColor(this.$root.RADON_LOADING_BAR.options.color,!0):"fail"===t?this.h_setFailColor(this.$root.RADON_LOADING_BAR.options.fail,!0):"location"===t?this.h_setLocation(this.$root.RADON_LOADING_BAR.options.location,!0):"transition"===t?this.h_setTransition(this.$root.RADON_LOADING_BAR.options.transition,!0):"inverse"===t?this.h_setInverse(this.$root.RADON_LOADING_BAR.options.inverse,!0):"thickness"===t&&this.h_setThickness(this.$root.RADON_LOADING_BAR.options.thickness,!0)},call:function(){var t,i=Array.prototype.slice.call(arguments);switch(t="temp"!==i[0]&&"set"!==i[0]||void 0===i[3]?null:i[3],i[0]){case"meta":this.callMeta(i[1],i[2],i[3]);break;case"temp":null===t&&(t=!0),this.callSetTemp(i[1],i[2],t);break;case"set":null===t&&(t=!1),this.callSetTemp(i[1],i[2],t);break;case"revert":this.callRevert(i[1])}},validColor:function(t){return regexColor.test(t)},validLocation:function(t){return regexLocation.test(t)},validTime:function(t){return regexTime.test(t)},validThickness:function(t){return regexThickness.test(t)},parseMeta:function(t){for(var i in t.func)this.call("meta",t.func[i].call,t.func[i].modifier,t.func[i].argument)},randomize:function(t){var i={color:null,fail:null,thickness:null,location:null,inverse:null,transition:null};void 0!==t&&void 0!==t.color?i.color=getRandomColor(t.color):i.color=getRandomColor(),void 0!==t&&void 0!==t.fail?i.fail=getRandomColor(t.fail):i.fail=getRandomColor(),void 0!==t&&void 0!==t.thickness?i.thickness=getRandomThickness(t.thickness):i.thickness=getRandomThickness(),void 0!==t&&void 0!==t.location?i.location=getRandomLocation(t.location):i.location=getRandomLocation(),void 0!==t&&void 0!==t.inverse?i.inverse=getRandomInverse(t.inverse):i.inverse=getRandomInverse(),void 0!==t&&void 0!==t.transition?i.transition=getRandomTransition(t.transition):i.transition=getRandomTransition();var e={func:[{call:"color",modifier:"temp",argument:i.color},{call:"fail",modifier:"temp",argument:i.fail},{call:"thickness",modifier:"temp",argument:i.thickness},{call:"location",modifier:"temp",argument:i.location},{call:"inverse",modifier:"temp",argument:i.inverse},{call:"transition",modifier:"temp",argument:i.transition}]};this.parseMeta(e)}},s=new t({data:{RADON_LOADING_BAR:{percent:0,hidden:!0,quickHide:!1,temp:{use:!1,autoRevert:!0,canSuccess:!0,color:"rgb(19, 91, 55)",debug:!1,failedColor:"red",inverse:!1,location:"top",show:!1,thickness:"2px",transition:{time:"0.2s",opacity:"0.6s"}},options:{autoRevert:void 0===i.autoRevert||i.autoRevert,canSuccess:!0,color:i.color||"rgb(19, 91, 55)",debug:i.debug||!1,failedColor:i.failedColor||"red",inverse:i.inverse||!1,location:i.location||"top",show:!1,thickness:i.thickness||"2px",transition:i.transition||{time:"0.2s",opacity:"0.6s"}}}}});e&&(window.VueProgressBarEventBus=s,o.init(s)),t.component("vue-progress-bar",_vueProgressbar2.default),t.prototype.$Progress=o};